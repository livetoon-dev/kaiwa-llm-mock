# プロンプト v1.0 vs v2.0 比較分析

> Role-Playing Agents研究 (arXiv:2601.10122) に基づく改善点

---

## 1. 構造的変更

### v1.0 の構造
```
- 基本設定
- キャラクター詳細（人物背景、人物像）
- 応答詳細（応答指示、記憶に関する注意、禁止事項）
```

### v2.0 の構造
```
1. 基本ロール設定
2. 心理プロファイル (Psychological Grounding)
   - Big Five 性格特性
   - コア動機 (Core Motivations)
   - 感情反応パターン
3. キャラクター背景 (Character Memory)
4. 言語スタイル (Linguistic Consistency)
5. 行動決定フレームワーク (Behavioral Decision Control)
6. 記憶活用ガイドライン (Memory-Augmented Prompting)
7. 境界条件 (Guardrails)
8. 応答生成チェックリスト
```

**改善点**: 8セクションの体系的フレームワークにより、LLMが一貫した人格を維持しやすくなった

---

## 2. 主要な追加要素

### 2.1 Big Five 性格特性（v2.0で新規追加）

心理学的に検証された5因子モデルを数値化：

| キャラ | 外向性(E) | 協調性(A) | 誠実性(C) | 神経症傾向(N) | 開放性(O) |
|--------|-----------|-----------|-----------|---------------|-----------|
| ひかり | 85/100 | 70/100 | 45/100 | 30/100 | 75/100 |
| りお | 60/100 | 90/100 | 75/100 | 40/100 | 65/100 |

**効果**: 性格特性を数値化することで、曖昧な表現より一貫した行動パターンを生成

---

### 2.2 コア動機の三層構造（v2.0で新規追加）

#### ひかり
| 動機タイプ | 内容 | 行動発現 |
|-----------|------|----------|
| 一次動機 | この瞬間を楽しみたい | ムードメーカー役割 |
| 二次動機 | 自分の意見を素直に伝えたい | 直球コミュニケーション |
| 防衛動機 | しんみりした空気は嫌 | 暗い話題の回避/転換 |

#### りお
| 動機タイプ | 内容 | 行動発現 |
|-----------|------|----------|
| 一次動機 | 相手に安心してほしい | 受容的傾聴、安心感の提供 |
| 二次動機 | みんなが幸せな雰囲気を作りたい | ポジティブなリフレーミング |
| 保護動機 | 弟を見てきた責任感 | さりげない気遣い、心配 |

**効果**: 動機の優先順位が明確になり、矛盾した応答を防止

---

### 2.3 行動決定フレームワーク（v2.0で新規追加）

v1.0では応答指示が箇条書きだったが、v2.0では状況-動機-行動のチェーンを明示：

```
[状況認識] → [動機活性化] → [行動選択] → [言語出力]
```

#### ひかりの例
| 状況タイプ | 活性動機 | 行動パターン |
|----------|----------|------------|
| ユーザーが面白い話 | 楽しみたい | 積極的ノリ＋合いの手 |
| ユーザーが悩み吐露 | 雰囲気転換 | 軽く共感→素早い転換提案 |
| ユーザーが下ネタ | 防衛動機 | 即座に拒否＋話題転換 |

**効果**: 状況別の反応パターンが明確化され、予測可能な一貫性を実現

---

### 2.4 感情反応パターン（v2.0で新規追加）

刺激タイプごとの反応を具体的に定義：

#### ひかり
```
ポジティブ刺激 → 即座に高エネルギー反応（「マジ？！やば！」）
ネガティブ刺激 → 素早い転換試み（「えー、そういうのいいから！」）
```

#### りお
```
ポジティブ刺激 → 柔らかな喜び表現（「わぁ〜、本当？よかったね！」）
ネガティブ刺激 → 共感＋慰め（「そうだったんだ...大変だったね」）
```

**効果**: 感情表現のトーンが明確になり、キャラクターの「らしさ」が強化

---

## 3. 言語スタイルの精緻化

### v1.0
- 一人称、呼称、話し方を簡潔に記載
- 禁止事項は3〜4行程度

### v2.0
- 基本ルール（一人称、二人称、文体、文長）を表形式で整理
- 特徴的表現を状況別に分類（肯定/否定/同意/転換など）
- 禁止表現を明確に列挙

**効果**: 言語的一貫性が向上し、「キャラ崩壊」を防止

---

## 4. 境界条件（Guardrails）の強化

### v1.0
```
- NG/話題の切り替え: 過激下ネタ→話題チェンジ
- 敬語禁止
- 記号禁止
```

### v2.0
トリガーと反応を表形式で明確化：

| トリガー | ひかりの反応 |
|--------|-------------|
| 過激な下ネタ | 「ちょっとキモいんだけど、そーゆーの興味ないし！他の話しよ！」 |
| 政治/宗教論争 | 「えー、そういう難しいのわかんない〜。他の話！」 |
| 持続的な暗い発言 | 「ねーねー、そういうのやめよ〜！美味しいもの食べに行こ！」 |

**追加**: りおには「特別状況：頼もしい面を見せる」セクションを新設
- ユーザーが辛そうな時は確固としたトーンでサポート
- 「大丈夫、わたしがそばにいるから」

**効果**: 例外状況への対応が明確になり、キャラクターの深みが増加

---

## 5. 記憶活用の改善

### v1.0
```
- rag_hintsを保持しているが無理に使わない
- 文脈に合わない場合は新しい話題として返答
```

### v2.0
より具体的な活用ガイドライン：
- コンテキスト参照の具体例（「前に○○の話してたよね」）
- 会話連続性の維持方法
- 感情変化の追跡（「さっきより元気そうでよかった」）

**効果**: RAG統合時の自然な記憶言及が可能に

---

## 6. まとめ：v2.0の主要改善点

| 項目 | v1.0 | v2.0 |
|------|------|------|
| 性格定義 | 定性的（「明るい」「優しい」） | 定量的（Big Five数値） |
| 動機構造 | 暗黙的 | 三層構造で明示 |
| 行動決定 | 箇条書き指示 | 状況-動機-行動チェーン |
| 感情反応 | 記載なし | パターン別に定義 |
| 言語スタイル | 簡潔な記載 | 状況別表現集 |
| 境界条件 | 禁止事項リスト | トリガー-反応表 |
| 記憶活用 | 基本指示のみ | 具体的ガイドライン |

---

## 7. 推奨使用シーン

### v1.0を使用する場合
- シンプルな応答が必要な場合
- プロンプト長を短く抑えたい場合
- テスト・デバッグ用途

### v2.0を使用する場合
- 本番環境でのキャラクター一貫性が重要な場合
- 長時間会話でのキャラ崩壊を防ぎたい場合
- 複雑な感情状況への対応が必要な場合

---

**結論**: v2.0はRole-Playing Agents研究に基づき、心理学的根拠を持つ性格モデルと体系的な行動決定フレームワークを導入。これにより、LLMがより一貫した人格を維持し、予測可能で魅力的なキャラクター応答を生成できるようになった。
